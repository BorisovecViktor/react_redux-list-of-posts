(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(e,t,a){e.exports=a(39)},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),l=a(5),o=a(22),u=a(14),m=a.n(u),i=a(2),p=a(19),_=function(e){return fetch("".concat("https://mate-academy.github.io/react_dynamic-list-of-posts/api").concat(e,".json")).then((function(e){return e.json()}))},E=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("/posts");case 2:return t=e.sent,e.next=5,_("/users");case 5:return a=e.sent,e.next=8,_("/comments");case 8:return n=e.sent,e.abrupt("return",t.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{postUser:a.find((function(t){return e.userId===t.id})),postComment:n.filter((function(t){return e.id===t.postId}))})})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=(a(33),a(34),function(e){var t=e.postUser,a=t.name,n=t.email,c=t.address;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"user__item"},r.a.createElement("span",{className:"user__name"},a)),r.a.createElement("li",{className:"user__item"},r.a.createElement("span",{className:"user__email"},n)),r.a.createElement("li",{className:"user__item"},r.a.createElement("span",{className:"user__city"},c.city,","),r.a.createElement("span",{className:"user__street"},c.street,","),r.a.createElement("span",{className:"user__zipcode"},c.zipcode)))}),d=(a(35),function(e){var t=e.comment,a=t.name,n=t.body,c=t.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"comment__user-name"},a),r.a.createElement("p",{className:"comment__user-email"},c),r.a.createElement("p",{className:"comment__user-text"},n))}),b=(a(36),a(7)),O=a(20),y=function(e){return e.posts},N=function(e){return e.loading},g=function(e){return e.errorMessage},j=function(e){return e.query},h=function(e){return e.posts.filter((function(t){var a=t.title,n=t.body;return"".concat(a," ").concat(n).toLocaleLowerCase().replace(/\s*/g," ").includes(e.filterQuery.toLocaleLowerCase().replace(/\s*/g," "))}))},v={posts:[],loading:!1,errorMessage:"",query:"",filterQuery:""},T=Object(b.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(i.a)(Object(i.a)({},e),{},{loading:!0,errorMessage:""});case"INIT_TODOS":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,posts:t.posts});case"HANDLE_ERROR":return Object(i.a)(Object(i.a)({},e),{},{errorMessage:t.errorMessage,loading:!1});case"DELETE_POST":return Object(i.a)(Object(i.a)({},e),{},{posts:e.posts.filter((function(e){return e.title!==t.postTitle}))});case"SET_QUERY":return Object(i.a)(Object(i.a)({},e),{},{query:t.query});case"SET_FILTER_QUERY":return Object(i.a)(Object(i.a)({},e),{},{filterQuery:t.filterQuery});default:return e}}),Object(O.composeWithDevTools)()),R=function(e){var t=e.post,a=Object(l.b)(),n=t.title,c=t.body,s=t.postUser,o=t.postComment;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"post__title"},n),r.a.createElement("ul",{className:"post__user user"},r.a.createElement(f,{postUser:s})),r.a.createElement("p",{className:"post__text"},c),r.a.createElement("ul",{className:"post__comment comment__list"},o.map((function(e){return r.a.createElement("li",{className:"comment__item",key:e.id},r.a.createElement(d,{comment:e}))}))),r.a.createElement("button",{type:"button",className:"post__button post__button--delete",onClick:function(){return a({type:"DELETE_POST",postTitle:n})}},"Delete post"))},L=function(){var e=Object(l.c)(h);return r.a.createElement("ul",{className:"post__list"},e.map((function(e){return r.a.createElement("li",{className:"post__item",key:e.id},r.a.createElement(R,{post:e}))})))},x=a(21),I=a.n(x),S=(a(37),function(){var e=Object(l.b)(),t=Object(l.c)(y),a=Object(l.c)(N),c=Object(l.c)(g),s=Object(l.c)(j),o=Object(n.useCallback)(I()((function(t){return e({type:"SET_FILTER_QUERY",filterQuery:t})}),500),[]);return r.a.createElement("div",{className:"post"},r.a.createElement("h1",{className:"post__header"},"Redux list of posts"),a?r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)):r.a.createElement(r.a.Fragment,null,0===t.length&&r.a.createElement("button",{type:"button",className:"post__button",onClick:function(){e({type:"START_LOADING"}),E().then((function(t){e(function(e){return{type:"INIT_TODOS",posts:e}}(t))})).catch((function(t){e(function(e){return{type:"HANDLE_ERROR",errorMessage:e}}(t.message))}))}},"Load Posts"),0!==t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"post__search-field"},r.a.createElement("label",{htmlFor:"search"},"Filter Posts",r.a.createElement("input",{type:"text",id:"search",value:s,onChange:function(t){var a=t.target.value;e(function(e){return{type:"SET_QUERY",query:e}}(a)),o(a)}}))),r.a.createElement(L,null)),c&&r.a.createElement("p",{className:"post__error"},"Error: ".concat(c))))}),D=function(){return r.a.createElement(l.a,{store:T},r.a.createElement(o.a,null,r.a.createElement(S,null)))};s.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.f41bfdc4.chunk.js.map